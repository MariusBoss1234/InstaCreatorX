[build]
  # Build command for the client
  command = "npm run build"
  # Output directory for Vite build
  publish = "dist"
  # Functions directory for Netlify Functions
  functions = "netlify/functions"

[build.environment]
  NODE_VERSION = "20"

# Redirect API calls to Netlify Functions
[[redirects]]
  from = "/api/n8n/webhook-test/:id"
  to = "/.netlify/functions/n8n-proxy?id=:id"
  status = 200
  force = true

# SPA fallback - redirect all other requests to index.html
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

